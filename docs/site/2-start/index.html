<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3 Start - TQ1 iOS SDK</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "3 Start";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> TQ1 iOS SDK</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../0-requirements/">1 Requirements</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../1-setup/">2 Setup</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">3 Start</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#start-tq1">Start TQ1</a></li>
                
                    <li><a class="toctree-l4" href="#preparing-the-appdelegate">Preparing the AppDelegate</a></li>
                
                    <li><a class="toctree-l4" href="#start-method">Start method</a></li>
                
                    <li><a class="toctree-l4" href="#register-for-remote-notifications">Register for remote notifications</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../3-analytics/">4 Analytics</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../4-notifications/">5 Notifications</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../5-Geonotifications/">6 Geonotifications</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../6-troubleshooting/">5 Troubleshooting</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">TQ1 iOS SDK</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>3 Start</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="start-tq1">Start TQ1</h1>
<h2 id="preparing-the-appdelegate">Preparing the AppDelegate</h2>
<p>The first thing to do is to make your <code>AppDelegate</code> implement the <code>TQDelegate</code> interface, so it will be able to handle push notifications.</p>
<p>To make possible for the user to receive pushes, first it's necessary to make some configuration. To do it, set the TQ's required configurations, like in the following example:</p>
<pre><code class="objectivec">@interface AppDelegate : UIResponder &lt;UIApplicationDelegate, TQ1Delegate&gt;
</code></pre>

<p>Once you add the <code>TQDelegate</code>an error will appear, that is because you have to implement the following <code>TQDelegate</code>  methods:</p>
<pre><code class="objectivec">-(void)handleBackgroundPushNotification:(NSDictionary *)userInfo pushId:(NSString *)pushId
{
}

-(void)handleForegroundPushNotification:(NSDictionary *)userInfo pushId:(NSString *)pushId
{
}

-(void)handleCustomActionWithIdentifier:(NSString *)identifier pushId:(NSString *)pushId
{
}
</code></pre>

<p>They will be explained later on the <a href="../4-notifications/">push notifications section</a>.</p>
<h2 id="start-method">Start method</h2>
<pre><code class="objectivec">[[TQ1 shared] startWithKey:AppKey];
[[TQ1 shared] trackRemoteNofitications:self];
</code></pre>

<ul>
<li>AppKey: the app identifier that will be used by our server. In order to get it, check the setup section.</li>
</ul>
<p>The first method will send the device information to our server and the second one will inform <code>TQ1 SDK</code> that this class will handle the push notifications. Note that, ideally <code>trackRemoteNofitications</code> should be run at the start of <code>didFinishLaunching</code> application method so the sdk can receive the necessary messages.</p>
<h2 id="register-for-remote-notifications">Register for remote notifications</h2>
<p>In order to receive notifications, you will have to register your application. In order to do this you can follow the <a href="https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/IPhoneOSClientImp.html">iOS documentation</a>, or simply do like the example below:</p>
<pre><code class="objectivec">//Inside didFinishLaunching
[[UIApplication sharedApplication] registerUserNotificationSettings:[UIUserNotificationSettings settingsForTypes:(UIUserNotificationTypeSound | UIUserNotificationTypeAlert | UIUserNotificationTypeBadge) categories:nil]];
</code></pre>

<p>With this configuration, the app may:
  - badge its icon upon a notification being received
  - play a sound upon a notification being received
  - display an alert upon a notification being received</p>
<p>You need also to implement:</p>
<pre><code class="objectivec">- (void)application:(UIApplication *)application didRegisterUserNotificationSettings:(UIUserNotificationSettings *)notificationSettings
{
    [[NSNotificationCenter defaultCenter]
     postNotificationName:@&quot;notification.alert.registered&quot;
     object:notificationSettings];
    [[UIApplication sharedApplication] registerForRemoteNotifications];
}
</code></pre>

<p>Once this is done, when you run the app TQ1 will automatically detect that you've registered for remote notifications and will send the device token to the server (you can check the logs, there should be a request to TQ1 with the words <code>device-token</code>).</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../3-analytics/" class="btn btn-neutral float-right" title="4 Analytics"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../1-setup/" class="btn btn-neutral" title="2 Setup"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../1-setup/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../3-analytics/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
